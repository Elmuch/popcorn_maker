

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Templates &mdash; Popcorn Maker 0.5.2 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.5.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Popcorn Maker 0.5.2 documentation" href="index.html" />
    <link rel="next" title="Update Popcorn Maker" href="update.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="update.html" title="Update Popcorn Maker"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="installation.html" title="Installation"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Popcorn Maker 0.5.2 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="templates">
<h1>Templates<a class="headerlink" href="#templates" title="Permalink to this headline">¶</a></h1>
<p>Templates are the starting point for generating Popcorn projects, they load Butter and allow the user to save their data.</p>
<div class="section" id="templates-components">
<h2>Templates Components<a class="headerlink" href="#templates-components" title="Permalink to this headline">¶</a></h2>
<p>Templates are composed by at least three components:</p>
<ul class="simple">
<li>An HTML page</li>
<li>A JSON Butter configuration file</li>
<li>A JSON with default metadata</li>
</ul>
<p>Any other media part of the template is optional.</p>
<p>If you want to have a look at an example is available at <a class="reference external" href="https://github.com/alfredo/popcorn_gallery_template">https://github.com/alfredo/popcorn_gallery_template</a></p>
<p>Templates can be added via the admin interface or bulk upload. It is recomended to import your template like this if your template has several assets.</p>
<p>These are the instructions to prepare a template for upload:</p>
<ul>
<li><p class="first">A template can be bulk uploaded with a zip file, the files must be contained in a folder with the template name.</p>
</li>
<li><p class="first">The slugified name of the zip file will be used as the name of the template.</p>
</li>
<li><p class="first">All the valid assets will be listed and added to the build.</p>
</li>
<li><p class="first">Any supplied asset with the template must use relative paths.</p>
</li>
<li><p class="first">Non relative paths is recommended to use absolute URLS.</p>
</li>
<li><p class="first">There is no need for the <tt class="docutils literal"><span class="pre">base</span></tt> tag.</p>
</li>
<li><p class="first">All templates butter initialization must call <tt class="docutils literal"><span class="pre">config</span></tt> as the default data value.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">config</span></tt> URL is automatically populated with the PM site required values
e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span>
 <span class="s">&quot;savedDataUrl&quot;</span><span class="p">:</span> <span class="s">&quot;data&quot;</span><span class="p">,</span>
 <span class="s">&quot;baseDir&quot;</span><span class="p">:</span> <span class="s">&quot;/static/&quot;</span><span class="p">,</span>
 <span class="s">&quot;name&quot;</span><span class="p">:</span> <span class="s">&quot;default-butter&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="adding-templates">
<h2>Adding templates<a class="headerlink" href="#adding-templates" title="Permalink to this headline">¶</a></h2>
<p>Only admins/superusers are allowed to add templates to the gallery.
You must create a superuser as specified in the above step.</p>
<p>Once that has been done, visit:</p>
<p><a class="reference external" href="http://local.mozillapopcorn.org/admin">http://local.mozillapopcorn.org/admin</a></p>
<p>In your browser and login to the Django Admin interface.</p>
<p>There you can choose to add a template file by file, or import a zip file.
A sample zipped template can be found at <a class="reference external" href="https://github.com/alfredo/popcorn_gallery_template">https://github.com/alfredo/popcorn_gallery_template</a></p>
<p>Now you must set each file to the proper type:</p>
<ul class="simple">
<li>Config</li>
<li>Default track events</li>
<li>Static assets</li>
<li>Template html</li>
</ul>
<p>Once that has all ben set, click the publish checkbox at the bottom of the page, then save your changes.</p>
</div>
<div class="section" id="template-sanitation">
<h2>Template Sanitation<a class="headerlink" href="#template-sanitation" title="Permalink to this headline">¶</a></h2>
<p>There are two points where the user generated content is added to the PM site, the templates and the projects</p>
<p>At the moment the templates are only added by trusted users, so the rules to do this are fairly relaxed, they are procesed to make sure the media paths are correct and that things fall into place once they are saved in the server.</p>
<p>The HTML and JSON stream served to the templates are preprocessed on save and the sanitation mechanics work pipe-like so there is room sanitize further this content in the future when this is open to more users.</p>
<p>The templates are imported in bulk and filters the bundled files imported by extension, they are saved using a Template specific storage in order to isolate the user generated content.</p>
<p>The butter projects are generated using the templates as a base, and they are populated using user specific metadata.</p>
<p>The metadata saved is sanitized using bleach for any string content. This as well as a pipe like we can add extra validation If we want to.</p>
<p>The final html export of the project is generated using the template and the saved metadata in the server side.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Templates</a><ul>
<li><a class="reference internal" href="#templates-components">Templates Components</a></li>
<li><a class="reference internal" href="#adding-templates">Adding templates</a></li>
<li><a class="reference internal" href="#template-sanitation">Template Sanitation</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="installation.html"
                        title="previous chapter">Installation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="update.html"
                        title="next chapter">Update Popcorn Maker</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/templates.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="update.html" title="Update Popcorn Maker"
             >next</a> |</li>
        <li class="right" >
          <a href="installation.html" title="Installation"
             >previous</a> |</li>
        <li><a href="index.html">Popcorn Maker 0.5.2 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Popcorn Development Team.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>